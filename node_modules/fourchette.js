var request = require('request');
var cheerio = require('cheerio');
var fs = require('fs');

var get = function () {
  var list_restaurant = [];
  for(var i = 1; i<= 10; i++){ //mettre 317
    request("https://www.lafourchette.com/restaurant+paris#sort=QUALITY_DESC&page="+i, function(error, response, body) {
      if(error) {
        console.log("Error: " + error);
      }

      var $ = cheerio.load(body);

      $('.resultItem').each(function() {
         var link = $(this);
         var name_restaurant = $(this).find('.resultItem-name').text();
         var href_restaurant = link.attr('.href');

         var restaurant = {
           name: name_restaurant,
           href: "https://restaurant.michelin.fr" +href_restaurant
         }

         list_restaurant.push(restaurant);
       });
    });
  }
  return list_restaurant;
}

exports.get = get;
